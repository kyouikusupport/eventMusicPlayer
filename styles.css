:root{
  color-scheme: light dark;
  --bg:#121212; --fg:#e8eaed; --muted:#9aa0a6; --accent:#8ab4f8;
  --card:#1f1f1f; --line:#2b2b2b; --btn:#2a2a2a; --hover:#242424;
}
*{box-sizing:border-box}
html,body{margin:0;padding:0;font-family:system-ui,-apple-system,"Noto Sans JP",sans-serif}
body{background:var(--bg);color:var(--fg)}
.bar{padding:12px 16px;border-bottom:1px solid var(--line);display:flex;align-items:center;gap:16px;flex-wrap:wrap}
footer.bar{border-top:1px solid var(--line);border-bottom:none}
h1{margin:0;font-size:20px}
.info{display:flex;gap:16px;flex-wrap:wrap}
.info div{white-space:nowrap}

.layout{display:grid;gap:16px;padding:16px;grid-template-columns:420px 1fr;grid-template-areas:
"pickers player"
"playlist player";}
.pickers{grid-area:pickers;display:flex;gap:8px;align-items:center;flex-wrap:wrap}
.pickers .hint{color:var(--muted);font-size:12px;line-height:1.4}

.primary{padding:8px 12px;border:1px solid var(--line);border-radius:8px;background:var(--btn);color:var(--fg);cursor:pointer}
.primary:hover{outline:2px solid var(--accent)}
.select-wrap{display:inline-flex;align-items:center;gap:6px}
select{padding:6px 8px;border-radius:8px;border:1px solid var(--line);background:var(--btn);color:var(--fg)}
select:disabled{opacity:.6}

.card{background:var(--card);border:1px solid var(--line);border-radius:12px;padding:16px}
.player{grid-area:player}
.playlist{grid-area:playlist}
.playlist h2{margin-top:0;font-size:16px}

.title{font-weight:700;font-size:18px}
.sub{display:flex;gap:12px;align-items:center}
.muted{color:var(--muted)}

.controls{display:flex;gap:8px;margin:8px 0;flex-wrap:wrap}
.controls button{padding:8px 10px;border-radius:8px;border:1px solid var(--line);background:var(--btn);color:var(--fg);cursor:pointer}
.controls button:hover{outline:2px solid var(--accent)}

.speed{display:grid;gap:6px;margin:6px 0 10px}
.speed-label{color:var(--muted);font-size:12px}
.speed-buttons{display:flex;flex-wrap:wrap;gap:6px}
.speed-buttons .spd{padding:6px 10px;border-radius:8px;border:1px solid var(--line);background:#242424;color:var(--fg);cursor:pointer}
.speed-buttons .spd:hover{outline:2px solid var(--accent)}
.speed-buttons .spd.active{outline:2px solid var(--accent); background:#2b2b2b}
.speed-indicator{color:var(--muted);font-size:12px}

.seek{display:grid;gap:6px}
#seek{width:100%}
.time{color:var(--muted);font-size:12px}
.volume{display:flex;gap:8px;align-items:center;margin-top:6px;color:var(--muted)}
#vol{flex:1}

#file-list{list-style:none;margin:0;padding:0;display:grid;gap:4px;max-height:60vh;overflow:auto}
#file-list li{display:grid;grid-template-columns:1fr auto auto;gap:8px;padding:8px;border-radius:8px;border:1px solid var(--line);background:#222;align-items:center}
#file-list li.active{outline:2px solid var(--accent)}
#file-list li .sub{color:var(--muted);font-size:12px}
.badge{font-size:12px;color:var(--muted)}
.convert-btn{padding:6px 10px;border-radius:8px;border:1px solid var(--line);background:#303030;color:var(--fg);cursor:pointer}
.convert-btn:hover{outline:2px solid var(--accent)}

@media (max-width: 1100px){
  .layout{grid-template-columns:1fr;grid-template-areas:
  "pickers" "player" "playlist";}
}

/* 進捗UI */
#conv-progress{
  position: fixed; inset: 0;
  display:flex; flex-direction:column; align-items:center; justify-content:center;
  background: rgba(0,0,0,.45); gap:12px; z-index: 9999;
}
.spinner{
  width:40px; height:40px; border-radius:50%;
  border:4px solid #999; border-top-color: transparent;
  animation: spin 1s linear infinite;
}
@keyframes spin{ to{ transform: rotate(360deg); } }
dialog{ border-radius:12px; background:var(--card); color:var(--fg); border:1px solid var(--line); }
dialog::backdrop{ background: rgba(0,0,0,.4); }
dialog menu{ display:flex; gap:8px; justify-content:flex-end; margin:0; padding:8px 0 0; }
dialog button{ padding:6px 10px; border-radius:8px; border:1px solid var(--line); background:#2a2a2a; color:var(--fg); cursor:pointer; }
dialog button:hover{ outline:2px solid var(--accent); }
